log:
  level: DEBUG
  filepath: /etc/traefik.log

api:  # Set up dashboard for view.
  dashboard: true
  debug: true

entryPoints:
  http:  # Websecure redirect
    address: ":80"
    http:
      redirections:
        entryPoint:
          to: https
          scheme: https
  https:  # Websecure entrypoint
    address: ":443"

  metrics:  # Metric for prometheus!
    address: ":8082"  

serversTransport:
  insecureSkipVerify: true

providers:
  docker:
    endpoint: "unix:///var/run/docker.sock"
    exposedByDefault: false
  file:
    directory: "/middlewares"
    watch: true

certificatesResolvers:
  cloudflare:
    acme:
      email: youremail@gmail.com
      storage: acme.json
      dnsChallenge:
        provider: cloudflare
        #disablePropagationCheck: true # uncomment this if you have issues pulling certificates through cloudflare, By setting this flag to true disables the need to wait for the propagation of the TXT record to all authoritative name servers.
        resolvers:
          - "1.1.1.1:53"
          - "1.0.0.1:53"

metrics:
  prometheus:
    entryPoint: metrics           # Expose metrics on the "metrics" entry point
    addEntryPointsLabels: true     # Optional: Add labels for entry points
    addServicesLabels: true        # Optional: Add labels for services
    buckets:                       # Optional: Custom histogram buckets for request durations
      - 0.1
      - 0.3
      - 1.2
      - 5.0
